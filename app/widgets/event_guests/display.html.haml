= widget_div do
  %section#guests{'data-subnav-label' => t("event.edit.menu.guests")}

    %h2= t "invitation.guests"
    
    .well

      %ul.guests
        - @event.invitations.includes(:event).each do |invitation|
          = render( { :state => :invitation }, invitation)

      %hr
      - if can?(:invite, @event) and not signed_in?

        %section#invite{'data-subnav-label' => '+'}

          = semantic_form_for :invite, :remote => true, :url => url_for_event(:invite_guest) , :html => { class: "form-stacked invite-guest" } do |f|
            = f.inputs do
              = render :view => :email_typeahead, :locals => { :form => f }
            = f.buttons do
              = f.commit_button


      - if can? :invite, @event and signed_in?

        %section#invite{'data-subnav-label' => '+'}

          = semantic_form_for :invite, :remote => true, :url => url_for_event(:invite_guest) , :html => { class: "form-stacked invite-guest" } do |f|
            = f.buttons do
              = f.commit_button

